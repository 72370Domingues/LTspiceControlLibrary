Version 4
SHEET 1 880 680
WIRE -928 -304 -1056 -304
WIRE -720 -304 -848 -304
WIRE -640 -304 -720 -304
WIRE -496 -304 -576 -304
WIRE -384 -304 -496 -304
WIRE -1056 -272 -1056 -304
WIRE -720 -256 -720 -304
WIRE -496 -256 -496 -304
WIRE -384 -256 -384 -304
WIRE -1056 -128 -1056 -192
WIRE -720 -128 -720 -176
WIRE -720 -128 -1056 -128
WIRE -496 -128 -496 -192
WIRE -496 -128 -720 -128
WIRE -384 -128 -384 -176
WIRE -384 -128 -496 -128
WIRE -1056 -112 -1056 -128
WIRE -1024 80 -1056 80
WIRE -960 80 -1024 80
WIRE -864 80 -896 80
WIRE -816 80 -864 80
WIRE -784 80 -816 80
WIRE -688 80 -720 80
WIRE -656 80 -688 80
WIRE -496 80 -592 80
WIRE -400 80 -496 80
WIRE -304 80 -336 80
WIRE -240 80 -304 80
WIRE -208 80 -240 80
WIRE -112 80 -144 80
WIRE -64 80 -112 80
WIRE 32 80 0 80
WIRE 64 80 32 80
WIRE 176 80 128 80
WIRE 192 80 176 80
WIRE -496 128 -512 128
WIRE -480 128 -496 128
WIRE -368 128 -368 112
WIRE -368 128 -384 128
WIRE -816 160 -816 80
WIRE -784 160 -816 160
WIRE -688 160 -720 160
WIRE -624 160 -624 112
WIRE -624 160 -688 160
WIRE -240 160 -240 80
WIRE -208 160 -240 160
WIRE -112 160 -144 160
WIRE -32 160 -32 112
WIRE -32 160 -112 160
WIRE 96 176 96 112
WIRE -1056 192 -1056 80
WIRE -512 192 -512 128
FLAG -1056 -112 0
FLAG -768 -240 PWM
FLAG 176 80 PWM
FLAG 96 256 0
FLAG -768 -192 0
FLAG -384 -304 OUT
FLAG -1056 272 0
FLAG -928 112 OUT
FLAG -1024 80 VREF
FLAG -864 80 VERR
FLAG -1056 -304 IN
FLAG -688 80 IREFP
FLAG -688 160 IREFI
FLAG -496 80 IREF
FLAG -304 80 IERR
FLAG -112 80 MREFP
FLAG -112 160 MREFI
FLAG 32 80 MREF
FLAG -512 272 0
FLAG -496 128 IL
SYMBOL voltage -1056 -288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL cap -512 -256 R0
SYMATTR InstName C1
SYMATTR Value 100u
SYMBOL diode -640 -288 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res -400 -272 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL ind -944 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10m
SYMBOL sw -720 -160 M180
SYMATTR InstName S1
SYMBOL voltage -1056 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(10 20 0 5m)
SYMBOL sub -944 112 R0
SYMATTR InstName U1
SYMBOL Integral -768 192 R0
SYMATTR Value T=0.1
SYMATTR InstName U2
SYMBOL nle 80 112 R0
SYMATTR InstName U4
SYMBOL Proportional -768 112 R0
SYMATTR Value K=0.1
SYMATTR InstName U5
SYMBOL add -640 112 R0
SYMATTR InstName U6
SYMBOL sub -384 112 R0
SYMATTR InstName U7
SYMBOL Integral -192 192 R0
SYMATTR Value T=0.1m
SYMATTR InstName U8
SYMBOL Proportional -192 112 R0
SYMATTR Value K=10
SYMATTR InstName U9
SYMBOL add -48 112 R0
SYMATTR InstName U10
SYMBOL bv -512 176 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)
SYMBOL 1stOrderLag -464 160 R0
SYMATTR Value K=1 T=0.1m
SYMATTR InstName U11
SYMBOL TriangleWaveVoltage 96 160 R0
SYMATTR InstName U3
SYMATTR Value V1=0 V2=1 Tperiod={1/10k} tratio=1
TEXT -1104 -520 Left 2 !.tran 0 100m 0 startup
TEXT -1104 -488 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
TEXT -1128 -376 Left 4 ;Circuit
TEXT -1136 -24 Left 4 ;Controller
TEXT -1104 -432 Left 2 !.ic V(OUT)=10
TEXT -1064 24 Left 2 ;voltage controller
TEXT -536 24 Left 2 ;current controller
TEXT 72 24 Left 2 ;PWM
TEXT -1128 -568 Left 4 ;Config
TEXT -1168 -624 Left 5 ;Boost Converter
