Version 4
SHEET 1 1304 1108
WIRE -1968 -1024 -2208 -1024
WIRE -1712 -1024 -1968 -1024
WIRE -1488 -1024 -1712 -1024
WIRE -1968 -992 -1968 -1024
WIRE -1888 -992 -1968 -992
WIRE -1712 -992 -1712 -1024
WIRE -1632 -992 -1712 -992
WIRE -1488 -992 -1488 -1024
WIRE -1408 -992 -1488 -992
WIRE -1968 -976 -1968 -992
WIRE -1888 -976 -1888 -992
WIRE -1712 -976 -1712 -992
WIRE -1632 -976 -1632 -992
WIRE -1488 -976 -1488 -992
WIRE -1408 -976 -1408 -992
WIRE -1968 -880 -1968 -896
WIRE -1888 -880 -1888 -912
WIRE -1888 -880 -1968 -880
WIRE -1712 -880 -1712 -896
WIRE -1632 -880 -1632 -912
WIRE -1632 -880 -1712 -880
WIRE -1488 -880 -1488 -896
WIRE -1408 -880 -1408 -912
WIRE -1408 -880 -1488 -880
WIRE -1968 -816 -1968 -880
WIRE -1456 -816 -1968 -816
WIRE -1360 -816 -1456 -816
WIRE -1184 -816 -1280 -816
WIRE -1008 -816 -1184 -816
WIRE -1008 -800 -1008 -816
WIRE -2208 -768 -2208 -1024
WIRE -944 -752 -976 -752
WIRE -1008 -736 -976 -752
WIRE -1712 -720 -1712 -880
WIRE -1456 -720 -1712 -720
WIRE -1360 -720 -1456 -720
WIRE -1184 -720 -1280 -720
WIRE -1136 -720 -1184 -720
WIRE -1072 -688 -1088 -688
WIRE -928 -688 -944 -688
WIRE -1136 -656 -1136 -720
WIRE -928 -656 -928 -688
WIRE -928 -656 -1136 -656
WIRE -1488 -624 -1488 -880
WIRE -1456 -624 -1488 -624
WIRE -1360 -624 -1456 -624
WIRE -1184 -624 -1280 -624
WIRE -1088 -624 -1088 -688
WIRE -1088 -624 -1184 -624
WIRE -1968 -576 -1968 -816
WIRE -1888 -576 -1968 -576
WIRE -1712 -576 -1712 -720
WIRE -1632 -576 -1712 -576
WIRE -1488 -576 -1488 -624
WIRE -1408 -576 -1488 -576
WIRE -1968 -560 -1968 -576
WIRE -1712 -560 -1712 -576
WIRE -1488 -560 -1488 -576
WIRE -1888 -544 -1888 -576
WIRE -1632 -544 -1632 -576
WIRE -1408 -544 -1408 -576
WIRE -1968 -464 -1968 -480
WIRE -1888 -464 -1888 -480
WIRE -1888 -464 -1968 -464
WIRE -1712 -464 -1712 -480
WIRE -1632 -464 -1632 -480
WIRE -1632 -464 -1712 -464
WIRE -1488 -464 -1488 -480
WIRE -1408 -464 -1408 -480
WIRE -1408 -464 -1488 -464
WIRE -2208 -432 -2208 -688
WIRE -1968 -432 -1968 -464
WIRE -1968 -432 -2208 -432
WIRE -1712 -432 -1712 -464
WIRE -1712 -432 -1968 -432
WIRE -1488 -432 -1488 -464
WIRE -1488 -432 -1712 -432
WIRE -2208 -400 -2208 -432
WIRE -624 -256 -640 -256
WIRE -1344 -240 -1376 -240
WIRE -1264 -240 -1344 -240
WIRE -1056 -240 -1200 -240
WIRE -880 -240 -1056 -240
WIRE -800 -240 -816 -240
WIRE -624 -224 -640 -224
WIRE -2176 -208 -2208 -208
WIRE -1888 -208 -2080 -208
WIRE -1824 -208 -1888 -208
WIRE -1744 -208 -1760 -208
WIRE -1664 -208 -1680 -208
WIRE -1536 -208 -1552 -208
WIRE -1456 -208 -1472 -208
WIRE -1376 -208 -1376 -240
WIRE -1376 -208 -1392 -208
WIRE -1232 -208 -1280 -208
WIRE -848 -208 -928 -208
WIRE -624 -192 -640 -192
WIRE -1744 -176 -1760 -176
WIRE -1664 -176 -1680 -176
WIRE -1536 -176 -1552 -176
WIRE -1456 -176 -1472 -176
WIRE -1344 -176 -1392 -176
WIRE -1264 -176 -1344 -176
WIRE -1136 -176 -1200 -176
WIRE -880 -176 -1136 -176
WIRE -800 -176 -816 -176
WIRE -624 -160 -640 -160
WIRE -2016 -144 -2064 -144
WIRE -1888 -144 -1920 -144
WIRE -1824 -144 -1888 -144
WIRE -1376 -144 -1392 -144
WIRE -1280 -144 -1280 -208
WIRE -1232 -144 -1280 -144
WIRE -928 -144 -928 -208
WIRE -848 -144 -928 -144
WIRE -624 -128 -640 -128
WIRE -2208 -112 -2208 -208
WIRE -2064 -112 -2064 -144
WIRE -1376 -112 -1376 -144
WIRE -1344 -112 -1376 -112
WIRE -1264 -112 -1344 -112
WIRE -1184 -112 -1200 -112
WIRE -880 -112 -1184 -112
WIRE -800 -112 -816 -112
WIRE -624 -96 -640 -96
WIRE -1792 -80 -1824 -80
WIRE -1712 -80 -1712 -128
WIRE -1712 -80 -1728 -80
WIRE -1280 -80 -1280 -144
WIRE -1232 -80 -1280 -80
WIRE -928 -80 -928 -144
WIRE -848 -80 -928 -80
WIRE -1136 -48 -1136 -176
WIRE -1056 -48 -1056 -240
WIRE -1280 -32 -1280 -80
WIRE -1280 -32 -1296 -32
WIRE -1184 -16 -1184 -112
WIRE -1168 -16 -1184 -16
WIRE -928 -16 -928 -80
WIRE -928 -16 -944 -16
WIRE -2032 16 -2064 16
WIRE -1824 16 -1824 -80
WIRE -1824 16 -2032 16
WIRE -1504 16 -1504 -128
WIRE -1504 16 -1824 16
WIRE -2064 32 -2064 16
WIRE -1760 224 -1792 224
WIRE -1712 224 -1760 224
WIRE -1616 224 -1648 224
WIRE -1584 224 -1616 224
WIRE -1552 224 -1584 224
WIRE -1456 224 -1488 224
WIRE -1408 224 -1456 224
WIRE -1264 224 -1280 224
WIRE -1792 272 -1792 224
WIRE -1680 272 -1680 256
WIRE -1680 272 -1696 272
WIRE -1584 304 -1584 224
WIRE -1552 304 -1584 304
WIRE -1456 304 -1488 304
WIRE -1376 304 -1376 256
WIRE -1376 304 -1456 304
WIRE -1312 384 -1312 256
WIRE -1312 384 -2064 384
WIRE -2064 416 -2064 384
WIRE -1760 448 -1792 448
WIRE -1712 448 -1760 448
WIRE -1616 448 -1648 448
WIRE -1584 448 -1616 448
WIRE -1552 448 -1584 448
WIRE -1456 448 -1488 448
WIRE -1408 448 -1456 448
WIRE -1264 448 -1344 448
WIRE -1792 496 -1792 448
WIRE -1680 496 -1680 480
WIRE -1680 496 -1696 496
WIRE -1584 528 -1584 448
WIRE -1552 528 -1584 528
WIRE -1456 528 -1488 528
WIRE -1376 528 -1376 480
WIRE -1376 528 -1456 528
FLAG -2208 -400 0
FLAG -2016 -960 UP
FLAG -2016 -912 0
FLAG -1456 -816 U
FLAG -2016 -544 UN
FLAG -2016 -496 0
FLAG -1760 -960 VP
FLAG -1760 -912 0
FLAG -1760 -544 VN
FLAG -1760 -496 0
FLAG -1456 -720 V
FLAG -2208 -1024 DC_P
FLAG -624 -256 UP
FLAG -624 -160 VN
FLAG -624 -224 UN
FLAG -624 -192 VP
FLAG -1536 -960 WP
FLAG -1536 -912 0
FLAG -1536 -544 WN
FLAG -1536 -496 0
FLAG -1456 -624 W
FLAG -624 -96 WN
FLAG -624 -128 WP
FLAG -2208 -32 0
FLAG -2064 -32 0
FLAG -2064 112 0
FLAG -1888 -208 Iu
FLAG -1888 -144 Iw
FLAG -1664 -208 Ip
FLAG -1664 -176 Iq
FLAG -1760 224 Ipref
FLAG -1616 224 Iperr
FLAG -1456 224 Vprefp
FLAG -1456 304 Vprefi
FLAG -1696 272 Ip
FLAG -1792 352 0
FLAG -1264 224 Vpref
FLAG -1760 448 Iqref
FLAG -1616 448 Iqerr
FLAG -1456 448 Vqrefp
FLAG -1456 528 Vqrefi
FLAG -1696 496 Iq
FLAG -1792 576 0
FLAG -1264 448 Vqref
FLAG -1552 -208 Vpref
FLAG -1552 -176 Vqref
FLAG -1424 -32 DC_P
FLAG -1344 -240 Vuref
FLAG -1344 -176 Vvref
FLAG -1344 -112 Vwref
FLAG -1184 -816 R
FLAG -1184 -720 S
FLAG -1184 -624 T
FLAG -944 -752 N
FLAG -2064 496 0
FLAG -2032 16 phase
SYMBOL voltage -2208 -784 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 350
SYMBOL diode -1904 -912 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL ind -1376 -800 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {Lfilter}
SYMBOL sw -1968 -880 M180
SYMATTR InstName S1
SYMBOL sw -1968 -464 M180
SYMATTR InstName S2
SYMBOL sw -1712 -880 M180
SYMATTR InstName S3
SYMBOL sw -1712 -464 M180
SYMATTR InstName S4
SYMBOL diode -1904 -480 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode -1648 -912 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode -1648 -480 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL sw -1488 -880 M180
SYMATTR InstName S5
SYMBOL sw -1488 -464 M180
SYMATTR InstName S6
SYMBOL diode -1424 -912 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode -1424 -480 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL ind -1376 -704 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {Lfilter}
SYMBOL ind -1376 -608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value {Lfilter}
SYMBOL 3PhaseComplementaryPWM -800 -304 R0
WINDOW 123 8 265 Left 2
SYMATTR Value2 Tdelay=0 tripdt=100m*Tdead
SYMATTR InstName U1
SYMATTR Value Vin1=-1 Vin2=1 Tperiod=100u Tdead=3u
SYMBOL LTspiceControlLibrary\\Sources\\3PhaseWyeSinWaveVoltage -1008 -816 R0
WINDOW 3 27 44 Left 2
SYMATTR Value Vamp={Vac*sqrt(2/3)} Freq={Fac}
SYMATTR InstName U9
SYMBOL bv -2208 -128 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)
SYMBOL bv -2064 -128 R0
SYMATTR InstName B2
SYMATTR Value V=I(L3)
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\uw-abTransformation -1824 -256 R0
SYMATTR InstName U2
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\xyRotation -1744 -256 R0
SYMATTR InstName U4
SYMBOL LTspiceControlLibrary\\Sources\\TriangleWaveVoltage -2064 16 R0
SYMATTR InstName U5
SYMATTR Value V1={-pi/2} V2={2*pi-pi/2} Tperiod={1/Fac} tratio=1
SYMBOL LTspiceControlLibrary\\Math\\Operands\\neg -1776 -48 R0
SYMATTR InstName U6
SYMBOL sub -1696 256 R0
SYMATTR InstName U7
SYMBOL Integral -1536 336 R0
SYMATTR Value T=0.5m
SYMATTR InstName U8
SYMBOL Proportional -1536 256 R0
SYMATTR Value K=5
SYMATTR InstName U10
SYMBOL add -1392 256 R0
SYMATTR InstName U11
SYMBOL voltage -1792 256 R0
SYMATTR InstName V2
SYMATTR Value {10*sqrt(3)}
SYMBOL sub -1696 480 R0
SYMATTR InstName U12
SYMBOL Integral -1536 560 R0
SYMATTR Value T=0.5m
SYMATTR InstName U13
SYMBOL Proportional -1536 480 R0
SYMATTR Value K=5
SYMATTR InstName U14
SYMBOL add -1392 480 R0
SYMATTR InstName U15
SYMBOL voltage -1792 480 R0
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\xyRotation -1536 -256 R0
SYMATTR InstName U16
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\ab-uvwTransformation -1456 -256 R0
SYMATTR InstName U17
SYMBOL LTspiceControlLibrary\\Math\\Operands\\rcp -1408 0 R0
SYMATTR InstName U3
SYMBOL LTspiceControlLibrary\\Math\\Operands\\mul -1248 -208 R0
SYMATTR InstName U18
SYMBOL LTspiceControlLibrary\\Math\\Operands\\mul -1248 -144 R0
SYMATTR InstName U19
SYMBOL LTspiceControlLibrary\\Math\\Operands\\mul -1248 -80 R0
SYMATTR InstName U20
SYMBOL LTspiceControlLibrary\\Math\\Functions\\min -1152 -48 M180
SYMATTR InstName U21
SYMBOL LTspiceControlLibrary\\Math\\Functions\\min -1072 -48 M180
SYMATTR InstName U22
SYMBOL LTspiceControlLibrary\\Math\\Operands\\inc -992 16 R0
SYMATTR InstName U23
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub -864 -208 R0
SYMATTR InstName U24
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub -864 -144 R0
SYMATTR InstName U25
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub -864 -80 R0
SYMATTR InstName U26
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Proportional -1344 0 R0
SYMATTR Value K=2
SYMATTR InstName U31
SYMBOL LTspiceControlLibrary\\TransferFunctions\\1stOrderLag -2160 -176 R0
SYMATTR Value K=1 T=50u
SYMATTR InstName U27
SYMBOL LTspiceControlLibrary\\TransferFunctions\\1stOrderLag -2000 -112 R0
SYMATTR Value K=1 T=50u
SYMATTR InstName U28
SYMBOL voltage -2064 400 R0
SYMATTR InstName V4
SYMATTR Value {Vac}
SYMBOL add -1328 256 R0
SYMATTR InstName U29
TEXT -2216 -1168 Left 2 !.tran 40m
TEXT -2216 -1136 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)
TEXT -744 -288 Left 2 ;PWM
TEXT -2208 -288 Left 2 ;sensor
TEXT -1376 -872 Left 2 !.params Lfilter=1m
TEXT -1192 -288 Left 2 ;two-phase modulation
TEXT -2256 -1208 Left 4 ;Config
TEXT -2296 -1264 Left 5 ;Three-Phase Inverter
TEXT -2256 -1088 Left 4 ;Circuit
TEXT -2248 -328 Left 4 ;Controller
TEXT -1176 56 Left 2 ;NOTE:\nIf you want to simulate the dead time of gate signals with accuracy,\nset maximum timestep of transient analysis below the dead time\nor set the parameter 'tripdt' of PWM below the dead time.\nSmaller value brings more accurate but slower simulation.
TEXT -1088 -872 Left 2 !.params Vac=200 Fac=50
TEXT -1808 168 Left 2 ;current controller
TEXT -1824 -288 Left 2 ;coordinate transformation
